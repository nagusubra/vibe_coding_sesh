*{box-sizing:border-box}
:root{--bg:#0b1020;--card:#121935;--muted:#9aa3b2;--text:#e7ecf3;--accent:#7aa2ff;--ok:#2ecc71;--bad:#ff5c5c;--radius:12px;--shadow:0 4px 20px rgba(0,0,0,0.15);--transition:all 0.3s cubic-bezier(0.4, 0.0, 0.2, 1)}
html,body{margin:0;background:var(--bg);background-image:radial-gradient(circle at 25% 25%, rgba(122,162,255,0.03) 0%, transparent 50%),radial-gradient(circle at 75% 75%, rgba(46,204,113,0.02) 0%, transparent 50%);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display','Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;font-feature-settings:"kern" 1,"liga" 1;-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;overflow:hidden}
.container{width:350px;min-height:320px;padding:16px;transition:var(--transition);position:relative}
.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding-bottom:8px;border-bottom:1px solid rgba(42,59,120,0.3)}
.title{font-weight:700;font-size:18px;letter-spacing:-0.5px;background:linear-gradient(135deg,var(--text),var(--accent));background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.link{background:transparent;border:0;color:var(--muted);cursor:pointer;text-decoration:none;font-size:13px;font-weight:500;transition:color 0.2s ease;padding:4px 8px;border-radius:6px}
.link:hover{color:var(--accent);background:rgba(122,162,255,0.1)}
.smallLink{font-size:11px}
.card{background:var(--card);border:1px solid rgba(42,59,120,0.4);border-radius:var(--radius);padding:16px;margin-top:12px;box-shadow:var(--shadow);backdrop-filter:blur(10px);transition:var(--transition)}
.card:hover{box-shadow:0 6px 25px rgba(0,0,0,0.2)}
.h{font-weight:700;margin-bottom:12px;font-size:14px;letter-spacing:-0.3px}
.muted{color:var(--muted);transition:color 0.2s ease}
.btn{margin-top:12px;border:0;border-radius:10px;padding:12px 16px;background:linear-gradient(180deg,#2d3f7a,#20336a);color:#fff;cursor:pointer;font-weight:600;font-size:14px;transition:all 0.2s ease;box-shadow:0 2px 8px rgba(0,0,0,0.2)}
.btn:hover{transform:translateY(-1px);box-shadow:0 4px 12px rgba(0,0,0,0.3)}
.btn:active{transform:translateY(0);box-shadow:0 2px 6px rgba(0,0,0,0.3)}
 .btn.small{margin-top:0;padding:8px 12px;font-size:12px;border-radius:8px}
input{margin-top:8px;border-radius:10px;border:1px solid rgba(42,59,120,0.6);padding:12px;width:100%;background:rgba(15,23,54,0.8);color:var(--text);font-size:14px;transition:border-color 0.2s ease}
input:focus{outline:none;border-color:var(--accent)}
.status{margin-top:8px;font-size:13px;transition:var(--transition);position:relative}
.status:after{content:'';position:absolute;bottom:-2px;left:0;width:0;height:2px;background:var(--accent);transition:width 0.3s ease}
.status.analyzing:after{width:100%;animation:pulse 1.5s ease-in-out infinite}
@keyframes pulse{0%,100%{opacity:0.4}50%{opacity:1}}
.verdict-row{display:flex;justify-content:space-between;align-items:center;margin-top:8px;gap:12px;opacity:0;animation:slideInUp 0.4s cubic-bezier(0.4, 0.0, 0.2, 1) forwards}
.verdict-line{display:flex;align-items:center;gap:8px;margin-top:12px;margin-bottom:16px;font-size:16px;font-weight:600;opacity:0;animation:slideInUp 0.4s cubic-bezier(0.4, 0.0, 0.2, 1) forwards}
.verdict{font-size:16px;font-weight:700;letter-spacing:-0.3px;flex:1;transition:var(--transition)}
.verdict.ok{color:var(--ok)}
.verdict.bad{color:var(--bad)}
.confidence{font-size:14px;font-weight:600;color:var(--accent);white-space:nowrap;padding:4px 8px;background:rgba(122,162,255,0.1);border-radius:6px;border:1px solid rgba(122,162,255,0.2)}
@keyframes slideInUp{0%{opacity:0;transform:translateY(10px)}100%{opacity:1;transform:translateY(0)}}
.reason{margin-top:12px;background:rgba(15,23,54,0.8);border:1px solid rgba(42,59,120,0.4);border-radius:10px;padding:12px;white-space:pre-wrap;max-height:120px;overflow:auto;font-size:13px;line-height:1.4;transition:var(--transition);opacity:0;animation:fadeIn 0.5s ease 0.2s forwards}
@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}
.spectrum{margin-top:16px;position:relative;height:20px;border-radius:10px;background:linear-gradient(90deg,var(--bad),#ffb347,#f4d35e,#9fdc7b,var(--ok));box-shadow:0 0 0 2px rgba(42,59,120,0.4),inset 0 0 8px rgba(0,0,0,.4);opacity:0;animation:scaleIn 0.4s cubic-bezier(0.4, 0.0, 0.2, 1) 0.1s forwards}
.pointer{position:absolute;top:-8px;width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-top:12px solid #fff;filter:drop-shadow(0 3px 6px rgba(0,0,0,.6));transition:left .5s cubic-bezier(.4,.8,.2,1);transform:translateX(-8px)}
.spectrumLabels{display:none}
.spectrumStages{margin-top:12px;display:flex;justify-content:space-between;gap:4px;font-size:12px;font-weight:600;flex-wrap:wrap;opacity:0;animation:fadeIn 0.4s ease 0.3s forwards}
.spectrumStages span{color:var(--muted);position:relative;cursor:default;white-space:nowrap;transition:all 0.3s ease;padding:4px;border-radius:6px}
.spectrumStages span::after{content:"";position:absolute;left:50%;top:-16px;width:2px;height:10px;background:rgba(42,59,120,0.6);transform:translateX(-1px)}
.spectrumStages span.highlight{color:var(--text);font-size:14px;font-weight:700;background:rgba(122,162,255,0.1);border:1px solid rgba(122,162,255,0.3);transform:scale(1.1)}
.verdictGif{margin-top:12px;border-radius:var(--radius);overflow:hidden;border:1px solid rgba(42,59,120,0.4);background:rgba(15,23,54,0.8);box-shadow:0 2px 12px rgba(0,0,0,0.2);position:relative;opacity:0;animation:scaleIn 0.4s cubic-bezier(0.4, 0.0, 0.2, 1) 0.3s forwards}
.verdictGif::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg,transparent 30%,rgba(122,162,255,0.05) 50%,transparent 70%);pointer-events:none}
.verdictGif img{display:block;transition:opacity .3s ease;border-radius:calc(var(--radius) - 1px)}
@keyframes scaleIn{0%{opacity:0;transform:scale(0.9)}100%{opacity:1;transform:scale(1)}}
.learningPrompt{margin-top:12px;padding:12px;background:rgba(26,35,50,0.8);border:1px solid rgba(42,59,120,0.4);border-radius:var(--radius)}
.learningLinks{display:flex;flex-direction:column;gap:8px}
.learningLink{display:block;padding:8px 10px;background:rgba(15,23,54,0.8);border:1px solid rgba(42,59,120,0.4);border-radius:8px;text-decoration:none;color:var(--text);font-size:12px;transition:all .2s ease}
.learningLink:hover{background:rgba(42,59,120,0.2);color:var(--accent);transform:translateY(-1px)}
.learningLink .linkTitle{font-weight:600;margin-bottom:2px}
.learningLink .linkDesc{color:var(--muted);font-size:11px}
.statsPanel.max{position:fixed;inset:8px 8px auto 8px;z-index:9999;width:320px;max-height:70vh;}
.statsPanel.max pre{max-height:48vh}
.links{margin-top:10px;display:flex;flex-direction:column;gap:8px;max-height:200px;overflow:auto}
.linkRow{display:flex;flex-direction:column;padding:8px 10px;border:1px solid rgba(42,59,120,0.4);border-radius:var(--radius);background:rgba(15,23,54,0.8);transition:all 0.2s ease}
.linkRow:hover{background:rgba(26,35,50,0.8)}
.linkVerdict{margin-bottom:4px}
.linkRowHeader{display:flex;justify-content:space-between;align-items:center;gap:8px;font-size:12px}
.badge{padding:3px 8px;border-radius:6px;font-size:11px;font-weight:600;background:rgba(42,59,120,0.6);color:var(--muted)}
.badge.ok{background:var(--ok);color:#000}
.badge.bad{background:var(--bad);color:#000}
.badge.uncertain{background:#555;color:#fff}
.linkUrl{font-size:11px;color:var(--muted);word-break:break-all;margin-bottom:4px;padding:2px 0}
.linkJust{font-size:11px;line-height:1.4;white-space:pre-wrap;color:var(--text)}
.footer{margin-top:16px;font-size:12px;text-align:center;padding-top:12px;border-top:1px solid rgba(42,59,120,0.3)}
